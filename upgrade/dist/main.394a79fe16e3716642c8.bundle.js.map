{"version":3,"sources":["webpack:///webpack/bootstrap 394a79fe16e3716642c8","webpack:///./../src/lib/Authentication/src/lib/Request/src/Request.js","webpack:///./../src/app/Utils/Utils.js","webpack:///./../src/lib/Authentication/src/AuthManager/api.js","webpack:///./../src/lib/Request/src/Request.js","webpack:///(webpack)/buildin/global.js","webpack:///(webpack)/~/node-libs-browser/~/process/browser.js","webpack:///(webpack)/~/node-libs-browser/~/util/~/inherits/inherits_browser.js","webpack:///(webpack)/~/node-libs-browser/~/util/support/isBufferBrowser.js","webpack:///(webpack)/~/node-libs-browser/~/util/util.js","webpack:///./../src/lib/Authentication/src/AuthManager/AuthManager.js","webpack:///./../src/lib/Authentication/src/AuthManager/ResourceServer.js","webpack:///./../src/lib/Authentication/src/AuthManager/Server.js","webpack:///./../src/lib/Authentication/src/lib/EventTarget/src/EventTarget.js","webpack:///./init.js"],"names":["uniqueGlobalName","freeid","id","window","thing","sendCrossDomainJSONRequest","url","callback","callbackParamName","errorCallback","script","document","createElement","setAttribute","callbackName","obj","getElementsByTagName","item","removeChild","sepSym","indexOf","onerror","Math","random","appendChild","chain","tasks","state","reduce","prev","next","then","Promise","resolve","reject","create_container","container","body","_f","arr","acc","swap","length","r","i","len","a","unshift","push","flatten","split_complex_id","complexId","separatorIndex","lastIndexOf","substring","productId","build_complex_id","hex","number","width","h","toString","toUpperCase","unhex","str","parseInt","substr","is_geometry","type","normalize_geometry_type","geometry","is_geojson_feature","properties","console","log","get_type_of_value","value","Number","isInteger","convert_date","fields","k","field","Date","from_gmx","values","types","convertMercator","map","x","L","gmxUtil","geometryToGeoJSON","s","stereo","geomixergeojson","geoJSON","sceneid","normalize_point","lng","y","make_close_to","normalize_ring","coordinates","bind","normalize_polygon","get_ref_lon","f","pos","filter","normalize_geometry","wrap_point","lon","wrap_ring","wrap_polygon","wrap_geometry","get_bbox","lat","sorter","b","rings","coords","xs","ys","sort","xmin","xmax","ymin","ymax","x1","y1","x2","y2","x3","y3","x4","y4","EAST_HEMISPHERE","bounds","point","WEST_HEMISPHERE","WEST_HEMISPHERE2","split180","split_coords","points","hemisphere","PolyUtil","clipPolygon","start_point","end_point","geometries","c1","c2","dist","abs","p","d","resourceServersInstances","resourceServersConstructors","authManager","scope","root","getResourceServer","getAuthManager","authorizationEndpoint","userInfoEndpoint","redirectEndpointHtml","location","href","replace","redirectEndpointAshx","credentialLoginEndpoint","AuthManager","clientId","_authorizationEndpoint","_userInfoEndpoint","_redirectEndpointHtml","_redirectEndpointAshx","_redirectEndpointAshx2","_credentialLoginEndpoint","_resourceServers","_clientId","cookieName","re","RegExp","cookie","resourceServer","rs","sendGetRequest","concat","response","catch","e","_chain","search","parseQueryString","slice","split","o","params","error","Status","Result","Error","message","resp","_getUserInfoDeferred","authorizationGrant","setTimeout","querySelector","_processAuthorization","err","_authorizeResourceServers","servers","Service","ServerId","State","insertAdjacentHTML","arg","foreignServer","iframeContainer","authUrl","open","reload","event","createEvent","initEvent","dispatchEvent","self","login","password","encodeURIComponent","toLowerCase","getUserInfo","Message","promises","promise","ResourceServer","_id","_authManager","$addResourceServer","baseForm","sync","$getAntiCsrfToken","data","ErrorInfo","errors","parseUri","parser","key","m","exec","uri","hostOnly","host","authority","requests","lastRequestId","uniquePrefix","processMessage","origin","dataStr","decodeURIComponent","dataObj","JSON","parse","request","CallbackName","iframe","parentNode","addEventListener","attachEvent","addQueryVariables","variables","oldQueryString","newQueryString","variable","hasOwnProperty","createPostIframe","style","display","src","Server","_root","requestUrl","img","Image","onload","requestURL","processResponse","parsedURL","protocol","originalFormAction","form","getAttribute","target","hiddenParamsDiv","appendFormParam","paramName","paramValue","input","submit","removeAttribute","EventTarget","listeners","stack","l","splice","removeEventListener","call","ss","gmxResourceServer","read_permalink","get_query","ids","join","sendPostRequest","layer","pagesize","query","WrapStyle","get_items","selected","quicklook","items","forEach","Array","isArray","visible","checked","cart","get_cart","matches","lang","position","cadastre","activeLayer","drawingObjects","searchCriteria","dateStart","dateEnd","isYearly","minCloudCover","maxCloudCover","minAngle","maxAngle","archive","satellites","rxDate","d1","d2","date","st","pc","ms","objects","name","color","viewState","annually","angle","clouds","localStorage","setItem","stringify","pathname"],"mappings":"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,EAA8CO,WAA9C,CAA0Dd,MAA1D;AACA;;QAEQL,0B,GAAAA,0B;;;;;;ACxCT;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;ACpBA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;AACA,4BAA4B,UAAU;;;;;;;ACnLtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACtBA;AACA;AACA;AACA;AACA;AACA,C;;;;;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,uBAAuB,SAAS;AAChC;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4CAA4C,KAAK;;AAEjD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA,mCAAmC,OAAO;AAC1C;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;;AAGA;AACA;AACA,yDAAyD;AACzD;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA,WAAW;AACX;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;A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","file":"main.394a79fe16e3716642c8.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 13);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 394a79fe16e3716642c8","let uniqueGlobalName = (() => {\r\n    let freeid = 0;\r\n    return thing => {\r\n        let id = `gmx_unique_${freeid++}`;\r\n        window[id] = thing;\r\n        return id;\r\n    };\r\n})();\r\n\r\n\r\n/** Посылает кросс-доменный GET запрос к серверу с использованием транспорта JSONP.\r\n *\r\n * @memberOf nsGmx.Utils\r\n * @param {String} url URL сервера.\r\n * @param {Function} callback Ф-ция, которая будет вызвана при получении от сервера результата.\r\n * @param {String} [callbackParamName=CallbackName] Имя параметра для задания имени ф-ции ответа.\r\n * @param {Function} [errorCallback] Ф-ция, которая будет вызвана в случае ошибки запроса к серверу\r\n */\r\nfunction sendCrossDomainJSONRequest(url, callback, callbackParamName, errorCallback)\r\n{\r\n\tcallbackParamName = callbackParamName || 'CallbackName';\r\n\r\n    let script = document.createElement(\"script\");\r\n\tscript.setAttribute(\"charset\", \"UTF-8\");\r\n\tlet callbackName = uniqueGlobalName((obj) => {\r\n\t\tcallback && callback(obj);\r\n\t\twindow[callbackName] = false;\r\n\t\tdocument.getElementsByTagName(\"head\").item(0).removeChild(script);\r\n\t});\r\n\r\n    let sepSym = url.indexOf('?') == -1 ? '?' : '&';\r\n\r\n    if (errorCallback) {\r\n        script.onerror = errorCallback;\r\n    }\r\n\r\n\tscript.setAttribute(\"src\", `${url}${sepSym}${callbackParamName}=${callbackName}&${Math.random()}`);\r\n\tdocument.getElementsByTagName(\"head\").item(0).appendChild(script);\r\n}\r\n\r\nexport { sendCrossDomainJSONRequest };\n\n\n// WEBPACK FOOTER //\n// ./../src/lib/Authentication/src/lib/Request/src/Request.js","import { isNumber } from \"util\";\r\n\r\nfunction chain (tasks, state) {\r\n    return tasks.reduce(\r\n        (prev, next) => prev.then(next),\r\n        new Promise ((resolve, reject) => resolve (state))\r\n    );\r\n}\r\n\r\nfunction create_container () {\r\n    let container = document.createElement('div');\r\n    document.body.appendChild(container);\r\n    return container;\r\n}\r\n\r\nfunction _f (arr, acc, swap) {\r\n    if (arr.length) {\r\n        let r = [];\r\n        for (let i = 0, len = arr.length; i < len; i++) {\r\n            let a = arr[i];\r\n            if (_f(a, acc, swap)) {\r\n                if (swap) {\r\n                    r.unshift(a);\r\n                }\r\n                else {\r\n                    r.push(a);\r\n                }\r\n            }\r\n        }\r\n        if (r.length) {\r\n            acc.push(r);\r\n        }\r\n        return false;\r\n    }\r\n    else {\r\n        return true;\r\n    }\r\n}\r\n\r\nfunction flatten (arr, swap) {\r\n    let acc = [];\r\n    _f(arr, acc, swap);\r\n    return acc;\r\n}\r\n\r\nfunction split_complex_id (complexId) {\r\n    let separatorIndex = complexId.lastIndexOf('!');\r\n    return separatorIndex > 0\r\n        ? { id: complexId.substring(0, separatorIndex),\r\n            productId: complexId.substring(separatorIndex + 1, complexId.length)\r\n        }\r\n        : { id: complexId };\r\n}\r\n\r\nfunction build_complex_id (id, productId) {\r\n    return productId ? id + '!' + productId : id;\r\n}\r\n\r\nfunction hex (number, width = 6) {\r\n    let h = number.toString(16);\r\n    while (h.length < width) {\r\n        h = '0' + h;\r\n    }\r\n    return h.toUpperCase();\r\n}\r\n\r\nfunction unhex (str) {\r\n    return parseInt(str.substr(1), 16);\r\n}\r\n\r\nfunction is_geometry(obj) {\r\n    let {type} = obj;\r\n    switch (type) {\r\n        case 'Point':\r\n        case 'MultiPoint':\r\n        case 'LineString':\r\n        case 'MultiLineString':\r\n        case 'Polygon':\r\n        case 'MultiPolygon':\r\n        case 'GeometryCollection':\r\n            return true;\r\n        default:\r\n            return false;\r\n    }    \r\n}\r\n\r\nfunction normalize_geometry_type (geometry) {\r\n    let {type} = geometry;\r\n    switch (type.toUpperCase()) {\r\n        case 'POINT':\r\n            geometry.type = 'Point';\r\n            break;\r\n        case 'MULTIPOINT':\r\n            geometry.type = 'MultiPoint';\r\n            break;\r\n        case 'LINESTRING':\r\n            geometry.type = 'LineString';\r\n            break;\r\n        case 'MULTILINESTRING':\r\n            geometry.type = 'MultiLineString';\r\n            break;\r\n        case 'POLYGON':\r\n            geometry.type = 'Polygon';\r\n            break;\r\n        case 'MULTIPOLYGON':\r\n            geometry.type = 'MultiPolygon';\r\n            break;\r\n        case 'GEOMETRYCOLLECTION':\r\n            geometry.type = 'GeometryCollection';\r\n            break;\r\n        default:\r\n            break;\r\n    }  \r\n    return geometry;  \r\n}\r\n\r\nfunction is_geojson_feature (obj) {\r\n    let {type, geometry, properties} = obj;\r\n    if(type !== 'Feature') {\r\n        console.log('geojson feature test failed: provided type is not a \"Feature\" object', obj);\r\n        return false;\r\n    }\r\n    if(!is_geometry(geometry)) {\r\n        console.log('geojson feature test failed: geometry is of wrong type', geometry);\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n\r\nfunction get_type_of_value (value) {\r\n    switch(typeof value) {\r\n        case 'number':                                \r\n            return Number.isInteger(value) ? 'Integer' : 'Float';\r\n        case 'boolean':                        \r\n            return 'Boolean';\r\n        case 'string':\r\n        default:\r\n            return 'String';\r\n    }\r\n}\r\n\r\nfunction convert_date (item, fields) {\r\n    for (let k in fields) {\r\n        let field = fields[k];\r\n        if (field.type === 'date') {\r\n            item[k] = new Date(item[k]);\r\n        }\r\n    }\r\n    return item;\r\n}\r\n\r\nfunction from_gmx ({fields, values, types}, convertMercator = true) {\r\n    return values.map(x => {\r\n        let item = fields.reduce((a, k, i) => {\r\n            switch(types[i]){\r\n                default:                    \r\n                    a[k] = x[i];\r\n                    break;                   \r\n                case 'date':\r\n                    switch (typeof x[i]) {\r\n                        case 'string':\r\n                            a[k] = new Date(x[i]);\r\n                            break;\r\n                        case 'number':\r\n                            a[k] = new Date(x[i] * 1000);\r\n                            break;\r\n                        default:\r\n                            break;\r\n                    }                    \r\n                    break;\r\n                case 'time':\r\n                    break;\r\n                case 'geometry':\r\n                    a[k] = L.gmxUtil.geometryToGeoJSON(x[i], convertMercator);\r\n                    break;\r\n            }\r\n            switch (k) {\r\n                case 'stereo':\r\n                    const s = x[i];\r\n                    a.stereo = typeof s === 'string' && s !== 'NONE';\r\n                    break;                    \r\n                default:\r\n                    break;\r\n            }\r\n            return a;                    \r\n        }, {});\r\n        if (item.geomixergeojson) {\r\n            item.geoJSON = item.geomixergeojson;\r\n            delete item.geomixergeojson;\r\n        }        \r\n        item.url = `http://search.kosmosnimki.ru/QuickLookImage.ashx?id=${item.sceneid}`;\r\n        return item;\r\n    });    \r\n}\r\n\r\nfunction normalize_point (lng, [x,y]) {\r\n    return [make_close_to(lng, x),y];\r\n}\r\n\r\nfunction normalize_ring (lng, coordinates) {\r\n    return coordinates.map(normalize_point.bind(null, lng));\r\n}\r\n\r\nfunction normalize_polygon (lng, coordinates) {        \r\n    if (isNumber (lng)) {\r\n        return coordinates.map(normalize_ring.bind(null, lng));\r\n    }\r\n    else {\r\n        return coordinates.map(normalize_ring.bind(null, get_ref_lon(coordinates)));\r\n    }\r\n}\r\n\r\nfunction get_ref_lon (coordinates) {        \r\n    let f = flatten (coordinates);\r\n    let pos = f.filter(([x,y]) => x >= 0);\r\n    let [x,y] = pos.length > 0 ? pos[0] : f[0];        \r\n    return x;    \r\n}\r\n\r\nfunction normalize_geometry (geometry, lng) {\r\n    let {type, coordinates} = geometry;\r\n    const x = isNumber(lng) ? lng : get_ref_lon(coordinates);\r\n    switch (type.toUpperCase()) {\r\n        case 'POLYGON':\r\n            return {type, coordinates: normalize_polygon(x, coordinates)};\r\n        case 'MULTIPOLYGON':\r\n            return {type, coordinates: coordinates.map(normalize_polygon.bind(null, x))};\r\n        default:\r\n            return geometry;\r\n    }\r\n}\r\n\r\nfunction wrap_point ([x,y]) {\r\n    let lon = x;\r\n    while (lon < -180) {\r\n        lon += 360;\r\n    }\r\n    while (lon > 180) {\r\n        lon -= 360;\r\n    }\r\n    return [lon,y];\r\n}\r\n\r\nfunction wrap_ring (coordinates) {\r\n    return coordinates.map(wrap_point);\r\n}\r\n\r\nfunction wrap_polygon (coordinates) {\r\n    return coordinates.map(wrap_ring);\r\n}\r\n\r\nfunction wrap_geometry (geometry) {\r\n    let {type, coordinates} = geometry;\r\n    switch (type.toUpperCase()) {\r\n        case 'POLYGON':\r\n            return {type, coordinates: wrap_polygon(coordinates)};\r\n        case 'MULTIPOLYGON':\r\n            return {type, coordinates: coordinates.map(wrap_polygon)};\r\n        default:\r\n            return geometry;\r\n    }\r\n}\r\n\r\nfunction get_bbox (geometry) {\r\n    let {type, coordinates} = geometry;\r\n    let lon = 0, lat = 0;\r\n    let sorter = (a,b)=> {\r\n        if (a > b) {\r\n            return 1;\r\n        }\r\n        if (a < b) {\r\n            return -1;\r\n        }            \r\n        return 0;\r\n    };\r\n    let rings = coords => {\r\n        let {xs, ys} = coords.reduce((a, [x, y]) => {        \r\n            a.xs.push (x);\r\n            a.ys.push (y);\r\n            return a;\r\n        }, {xs:[],ys:[]});        \r\n        xs = xs.sort(sorter);\r\n        ys = ys.sort(sorter);\r\n        let xmin = xs[0];\r\n        let xmax = xs[xs.length - 1];\r\n        let ymin = ys[0];\r\n        let ymax = ys[ys.length - 1];\r\n        return [[xmin,ymax],[xmax,ymax],[xmax,ymin],[xmin,ymin]];\r\n    };\r\n    switch (type.toUpperCase()) {\r\n        case 'POINT':\r\n            [lon, lat] = coordinates;\r\n            return [[lon,lat],[lon,lat],[lon,lat],[lon,lat]];\r\n        case 'MULTIPOINT':\r\n        case 'LINESTRING':\r\n            return rings (coordinates);\r\n        case 'POLYGON':\r\n            return rings (coordinates[0]);\r\n        case 'MULTILINESTRING':\r\n        case 'MULTIPOLYGON':\r\n            let {xs, ys} = coordinates.reduce ((a, coords) => {\r\n                let [[x1,y1],[x2,y2],[x3,y3],[x4,y4]] = rings (coords[0]);\r\n                a.xs.push (x1);\r\n                a.xs.push (x2);\r\n                a.xs.push (x3);\r\n                a.xs.push (x4);\r\n                a.ys.push (y1);\r\n                a.ys.push (y2);\r\n                a.ys.push (y3);\r\n                a.ys.push (y4);\r\n                return a;\r\n            }, {xs: [], ys: []});\r\n            xs = xs.sort(sorter);\r\n            ys = ys.sort(sorter);\r\n            let xmin = xs[0];\r\n            let xmax = xs[xs.length - 1];\r\n            let ymin = ys[0];\r\n            let ymax = ys[ys.length - 1];\r\n            return [[xmin,ymax],[xmax,ymax],[xmax,ymin],[xmin,ymin]];                        \r\n        default:\r\n            return null;\r\n    }\r\n}\r\n\r\nconst EAST_HEMISPHERE = L.bounds(\r\n    L.point(0, -90), \r\n    L.point(180, 90)\r\n);\r\n\r\nconst WEST_HEMISPHERE = L.bounds(\r\n    L.point(180, -90),\r\n    L.point(360, 90)\r\n);\r\n\r\nconst WEST_HEMISPHERE2 = L.bounds(\r\n    L.point(-180, -90),\r\n    L.point(0, 90)\r\n);\r\n\r\nfunction split180 (geometry) {\r\n    const {type, coordinates} = geometry;\r\n    let split_coords = (points, hemisphere) => {        \r\n        let coords = L.PolyUtil.clipPolygon(points, hemisphere).map(({x,y}) => [x,y]);\r\n        if (coords.length > 0) {\r\n            let start_point = coords[0];\r\n            let end_point = coords[coords.length - 1];\r\n            if (start_point[0] != end_point[0] || start_point[1] != end_point[1]) {\r\n                coords.push(start_point);\r\n            }\r\n        }\r\n        return coords;\r\n    };    \r\n    let geometries = [];\r\n    switch(type.toUpperCase()) {\r\n        case 'POLYGON':\r\n            const points = coordinates[0].map(([x,y]) => L.point(x,y));\r\n            let c1 =  split_coords(points, EAST_HEMISPHERE);\r\n            if (c1.length > 0) {\r\n                geometries.push(normalize_geometry ({type, coordinates: [c1]}, 179));\r\n            }            \r\n            let c2 = split_coords(points, WEST_HEMISPHERE);\r\n            if (c2.length > 0) {\r\n                geometries.push(normalize_geometry ({type, coordinates: [c2]}, -179));\r\n            }\r\n            else {\r\n                c2 = split_coords(points, WEST_HEMISPHERE2);\r\n                if (c2.length > 0) {\r\n                    geometries.push(normalize_geometry ({type, coordinates: [c2]}, -179));\r\n                }\r\n            }\r\n            break;\r\n        case 'LINESTRING':            \r\n        default:\r\n            geometries.push(geometry);\r\n            break;\r\n    }\r\n    return geometries;\r\n}\r\n\r\nfunction make_close_to (lng, x) {\r\n    let dist = (a,b) => Math.abs (a - b);\r\n    let {p} = [x - 360, x, x + 360]\r\n    .map(p => {\r\n        return {p, d: dist (lng, p)};\r\n    })\r\n    .reduce((a,{p,d}) => {\r\n        if (a === null || d < a.d) {\r\n            a = {d, p};\r\n        }\r\n        return a;\r\n    }, null);\r\n    return p;\r\n}\r\n\r\nexport {\r\n    chain, create_container, flatten, split_complex_id, unhex, hex, is_geojson_feature, is_geometry,\r\n    get_type_of_value, from_gmx, get_bbox, normalize_geometry_type,\r\n    normalize_geometry, normalize_polygon, normalize_ring, normalize_point, split180, make_close_to\r\n};\n\n\n// WEBPACK FOOTER //\n// ./../src/app/Utils/Utils.js","import { ResourceServer } from './ResourceServer.js';\r\nimport { AuthManager } from './AuthManager.js';\r\n\r\nlet resourceServersInstances = {};\r\nlet resourceServersConstructors = {};\r\nlet authManager;\r\n\r\n// строка, в которой перечислены псевдонимы используемых нами серверов ресурсов.\r\n// потребуется для синхронизации серверов ресурсов\r\nlet scope;\r\n\r\n// зашиваем известные и часто-используемые ресурсы\r\nresourceServersConstructors['subscriptions'] = () => {\r\n    return new ResourceServer(authManager, {\r\n        id: 'subscriptions',\r\n        root: 'http://fires.kosmosnimki.ru/SAPIv2'\r\n    });\r\n};\r\n\r\nresourceServersConstructors['geomixer2'] = () => {\r\n    return new ResourceServer(authManager, {\r\n        id: 'geomixer2',\r\n        root: 'http://maps2.kosmosnimki.ru'\r\n    });\r\n};\r\n\r\nresourceServersConstructors['geomixer'] = () => {\r\n    return new ResourceServer(authManager, {\r\n        id: 'geomixer',\r\n        root: 'http://maps.kosmosnimki.ru'\r\n    });\r\n};\r\n\r\nresourceServersConstructors['geocode'] = () => {\r\n    return new ResourceServer(authManager, {\r\n        id: 'geocode',\r\n        root: 'http://geocode.kosmosnimki.ru'\r\n    });\r\n};\r\n\r\nfunction getResourceServer (id) {\r\n    if (!authManager) {\r\n        authManager = getAuthManager();\r\n    }\r\n    // используем lazy instantiation для отложенного создания\r\n    // необходимых нам компонентов\r\n    if (!resourceServersInstances[id]) {\r\n        resourceServersInstances[id] = resourceServersConstructors[id]();\r\n        if (!scope) {\r\n            scope = id;\r\n        } else {\r\n            scope += (',' + id);\r\n        }\r\n    }\r\n    return resourceServersInstances[id];\r\n}\r\n\r\nfunction getAuthManager () {\r\n    // то же и с authManager\r\n    if (!authManager) {\r\n        authManager = new AuthManager({\r\n            authorizationEndpoint: 'http://my.kosmosnimki.ru/Test/LoginDialog',\r\n            userInfoEndpoint: 'http://my.kosmosnimki.ru/oAuth/LoginDialog',\r\n            redirectEndpointHtml: location.href.replace(/[^\\/]+$/, '') + 'oAuth2/oAuthCallback.htm',\r\n            redirectEndpointAshx: location.href.replace(/[^\\/]+$/, '') + 'oAuth2/oAuthCallback.ashx',\r\n            credentialLoginEndpoint: 'http://my.kosmosnimki.ru/Handler/Login'\r\n        });\r\n    }\r\n    return authManager;\r\n}\r\n\r\nexport { getAuthManager, getResourceServer };\n\n\n// WEBPACK FOOTER //\n// ./../src/lib/Authentication/src/AuthManager/api.js","let uniqueGlobalName = (() => {\r\n    let freeid = 0;\r\n    return thing => {\r\n        let id = `gmx_unique_${freeid++}`;\r\n        window[id] = thing;\r\n        return id;\r\n    };\r\n})();\r\n\r\n\r\n/** Посылает кросс-доменный GET запрос к серверу с использованием транспорта JSONP.\r\n *\r\n * @memberOf nsGmx.Utils\r\n * @param {String} url URL сервера.\r\n * @param {Function} callback Ф-ция, которая будет вызвана при получении от сервера результата.\r\n * @param {String} [callbackParamName=CallbackName] Имя параметра для задания имени ф-ции ответа.\r\n * @param {Function} [errorCallback] Ф-ция, которая будет вызвана в случае ошибки запроса к серверу\r\n */\r\nfunction sendCrossDomainJSONRequest(url, callback, callbackParamName, errorCallback)\r\n{\r\n\tcallbackParamName = callbackParamName || 'CallbackName';\r\n\r\n    let script = document.createElement(\"script\");\r\n\tscript.setAttribute(\"charset\", \"UTF-8\");\r\n\tlet callbackName = uniqueGlobalName((obj) => {\r\n\t\tcallback && callback(obj);\r\n\t\twindow[callbackName] = false;\r\n\t\tdocument.getElementsByTagName(\"head\").item(0).removeChild(script);\r\n\t});\r\n\r\n    let sepSym = url.indexOf('?') == -1 ? '?' : '&';\r\n\r\n    if (errorCallback) {\r\n        script.onerror = errorCallback;\r\n    }\r\n\r\n\tscript.setAttribute(\"src\", `${url}${sepSym}${callbackParamName}=${callbackName}&${Math.random()}`);\r\n\tdocument.getElementsByTagName(\"head\").item(0).appendChild(script);\r\n}\r\n\r\nexport { sendCrossDomainJSONRequest };\n\n\n// WEBPACK FOOTER //\n// ./../src/lib/Request/src/Request.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 4\n// module chunks = 0","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/~/node-libs-browser/~/process/browser.js\n// module id = 5\n// module chunks = 0","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/~/node-libs-browser/~/util/~/inherits/inherits_browser.js\n// module id = 6\n// module chunks = 0","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/~/node-libs-browser/~/util/support/isBufferBrowser.js\n// module id = 7\n// module chunks = 0","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  // Allow for deprecating things in the process of starting up.\n  if (isUndefined(global.process)) {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  if (process.noDeprecation === true) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/~/node-libs-browser/~/util/util.js\n// module id = 8\n// module chunks = 0","import { sendCrossDomainJSONRequest } from '../lib/Request/src/Request.js';\r\nimport { EventTarget } from '../lib/EventTarget/src/EventTarget.js';\r\n\r\nclass AuthManager extends EventTarget {\r\n    constructor({\r\n        authorizationEndpoint, \r\n        userInfoEndpoint, \r\n        redirectEndpointHtml, \r\n        redirectEndpointAshx,         \r\n        credentialLoginEndpoint,\r\n        clientId}){\r\n        super();\r\n        // поддерживаем как минимум два события для\r\n        // серверов ресурсов: login и logout\r\n        this._authorizationEndpoint = authorizationEndpoint;\r\n        this._userInfoEndpoint = userInfoEndpoint;\r\n        this._redirectEndpointHtml = redirectEndpointHtml;\r\n        this._redirectEndpointAshx = redirectEndpointAshx;\r\n        this._redirectEndpointAshx2 = `${redirectEndpointAshx}/?return_url=${location.href}`;\r\n        this._credentialLoginEndpoint = credentialLoginEndpoint;\r\n        this._resourceServers = [];\r\n        this._clientId = clientId || 1;\r\n    }\r\n    $getAntiCsrfToken() {\r\n        const cookieName = \"sync\";\r\n        const re = new RegExp(`.*${cookieName}=([^;]+).*`, 'i');\r\n        return document.cookie.replace(re, '$1');        \r\n    }\r\n    /** Добавляет сервер ресурсов\r\n     * Должна вызываться только из класса ResourceServer.\r\n     * @param {ResourceServer} resourceServer\r\n     */\r\n    $addResourceServer(resourceServer){\r\n        this._resourceServers.push(resourceServer);\r\n    }    \r\n    _chain (tasks, state) {        \r\n        return tasks.reduce(\r\n            (prev, next) => prev.then(next),\r\n            new Promise ((resolve, reject) => resolve (state))\r\n        );\r\n    }\r\n    _authorizeResourceServers(){\r\n        let tasks = this._resourceServers.map(rs => {\r\n            return state => {\r\n                return new Promise(resolve => {\r\n                    rs.sendGetRequest('oAuth2/LoginDialog.ashx')\r\n                    .then(response => {\r\n                        state = state.concat(response);\r\n                        resolve(state);\r\n                    })\r\n                    .catch(e => state.push(e));\r\n                });\r\n            };\r\n        });\r\n        return this._chain(tasks, []);\r\n    }\r\n    _processAuthorization(search){\r\n        function parseQueryString (search) {\r\n            let a = search.slice(1).split('&');\r\n            let o = {};\r\n            for (let i = 0; i < a.length; i++) {\r\n                let s = a[i].split('=');\r\n                o[s[0]] = s[1];\r\n            }\r\n            return o;\r\n        }\r\n        return new Promise((resolve, reject) => {            \r\n            // превращаем строку с параметрами в хеш\r\n            let params = parseQueryString(search);\r\n\r\n            if (params.error) {\r\n                reject({\r\n                    Status: 'auth',\r\n                    Result: null,\r\n                    Error: {\r\n                        message: params.error\r\n                    }\r\n                });\r\n            } else {\r\n                sendCrossDomainJSONRequest(`${this._redirectEndpointAshx}${search}`,\r\n                resp => {\r\n                    if (resp.Status === 'ok') {\r\n                        resolve({\r\n                            Status: 'ok',\r\n                            Result: resp.Result\r\n                        });\r\n                    } else {\r\n                        reject({\r\n                            Status: resp.Status,\r\n                            Result: null\r\n                        });\r\n                    }\r\n                }, \r\n                'CallbackName', \r\n                () => {\r\n                    reject({\r\n                        Status: 'network',\r\n                        Result: null,\r\n                        Error: {\r\n                            message: arguments[2]\r\n                        }\r\n                    });\r\n                });                \r\n            }\r\n        });\r\n    }\r\n    /** Получение информации о пользователе от AuthServer\r\n     * @return {Function} promise(userInfo)\r\n     */\r\n    getUserInfo(){\r\n        if (this._getUserInfoDeferred) {\r\n            return this._getUserInfoDeferred;\r\n        }        \r\n        return this._getUserInfoDeferred = new Promise((resolve, reject) => {\r\n\r\n            function authorizationGrant(search) {\r\n                // удаляем айфрейм и глобальную переменную\r\n                setTimeout(function() {\r\n                    delete window.authorizationGrant;\r\n                    document.body.removeChild (document.body.querySelector('.authorizationIframe'));                    \r\n                }, 0);\r\n\r\n                this._processAuthorization(search).then(resp => resolve(resp), (err) => reject(err));\r\n            }\r\n\r\n            // посылаем запросы на все сервера ресурсов\r\n            // когда они все ответят ..\r\n            this._authorizeResourceServers()\r\n            .then(servers => {\r\n                // .. формируем параметры state и scope\r\n                let scope = '';\r\n                let state = '';\r\n                for (let i = 0; i < servers.length; i++) {\r\n                    let response = servers[i];\r\n                    scope += response.Service.ServerId + ',';\r\n                    state += response.Result.State + ',';\r\n                }\r\n                scope = scope.slice(0, -1);\r\n                state = state.slice(0, -1);\r\n\r\n                // .. и посылаем запрос на сервер авторизации\r\n                window.authorizationGrant = authorizationGrant.bind(this);\r\n                document.body.insertAdjacentHTML('afterbegin', \r\n                `<iframe\r\n                    class=\"authorizationIframe\"\r\n                    style=\"display: block !important; position: absolute; left: -99999px;\"\r\n                    src=\"${this._userInfoEndpoint}/?client_id=1&redirect_uri=${this._redirectEndpointHtml}&scope=${scope}&state=${state}\">\r\n                </iframe>`);\r\n\r\n            })\r\n            .catch(() => {\r\n                reject({\r\n                    Status: 'error'\r\n                });\r\n            });\r\n\r\n        });               \r\n    }\r\n    /** Принудительное перелогинивание пользователя.\r\n     * Пользователь должен увидеть поля для ввода\r\n     * логина/пароля (возможно, на сервере авторизации).\r\n     * При успешной авторизации библиотека должна\r\n     * произвести авторизацию пользователя на всех\r\n     * подключенных серверах ресурсов\r\n     * и только после этого resolve promise\r\n     * @return {Function} promise(userInfo)\r\n     */\r\n    login (arg) {\r\n        let foreignServer;\r\n        let iframeContainer;\r\n        if (typeof arg === 'string') {\r\n            // обратная совместимость\r\n            foreignServer = arg;\r\n        } else if (typeof arg === 'object') {\r\n            foreignServer = arg.foreignServer;\r\n            iframeContainer = arg.iframeContainer;\r\n        }\r\n        \r\n        this._authorizeResourceServers()\r\n        .then(servers => {\r\n            // .. формируем параметры state и scope\r\n            let scope = '';\r\n            let state = '';\r\n            for (let i = 0; i < servers.length; i++) {\r\n                let response = servers[i];\r\n                scope += response.Service.ServerId + ',';\r\n                state += response.Result.State + ',';\r\n            }\r\n            scope = scope.slice(0, -1);\r\n            state = state.slice(0, -1);\r\n\r\n            let authUrl = `${this._authorizationEndpoint}/?client_id=1&redirect_uri=${this._redirectEndpointAshx2}&scope=${scope}&state=${state}`;\r\n\r\n            if (foreignServer) {\r\n                authUrl += `&authserver=${foreignServer}`;\r\n            }\r\n\r\n            if (!iframeContainer) {\r\n                window.open(authUrl, '_self');\r\n            } else {\r\n                window.authorizationGrant = authorizationGrant;\r\n                document.body.removeChild(document.body.querySelector('.authorizationIframe'));\r\n                document.body.insertAdjacentHTML('afterbegin', \r\n                `<iframe\r\n                    class=\"authorizationIframe\"\r\n                    src=\"${self._authorizationEndpoint}/?client_id=1\r\n                        &redirect_uri=${self._redirectEndpointHtml}\r\n                        &redirect_uri_alt=${self._redirectEndpointAshx2}\r\n                        &scope=${scope}\r\n                        &state=${state}\">\r\n                </iframe>`);\r\n\r\n                function authorizationGrant() {\r\n                    window.location.reload();                    \r\n                    let event = document.createEvent('Event');\r\n                    event.initEvent('login', false, false);\r\n                    this.dispatchEvent(event);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    /** Залогиниться, используя логин и пароль\r\n     * @param  {String} login\r\n     * @param  {String} password\r\n     * @return {Promise}\r\n     */\r\n    loginWithCredentials (login, password) {\r\n        // отправляем ajax-запрос на Handler/Login с логином и паролем\r\n        // После этого пользователь считается залогиненным на my.\r\n        // Затем вызываем getUserInfo()\r\n\r\n        return new Promise ((resolve, reject) => {            \r\n            sendCrossDomainJSONRequest(\r\n                `${this._credentialLoginEndpoint}?login=${encodeURIComponent(login)}&password=${encodeURIComponent(password)}`,\r\n                response => {\r\n                    if (response.Status.toLowerCase() === 'ok') {\r\n                        this.getUserInfo()\r\n                        .then(() => {\r\n                            resolve({\r\n                                Status: 'ok',\r\n                                Result: arguments[0].Result\r\n                            });\r\n                        })\r\n                        .catch(() => {\r\n                            reject({\r\n                                Status: 'error',\r\n                                Result: {\r\n                                    Message: 'authorization error'\r\n                                }\r\n                            });\r\n                        });\r\n                    } else if (response.Status.toLowerCase() === 'auth') {\r\n                        reject({\r\n                            Status: 'auth',\r\n                            Result: {\r\n                                Message: response.Result.Message\r\n                            }\r\n                        });\r\n                    } else {\r\n                        reject({\r\n                            Status: 'error',\r\n                            Result: {\r\n                                Message: 'unknown error'\r\n                            }\r\n                        });\r\n                    }\r\n                },\r\n                'CallbackName',\r\n                () => {\r\n                    reject({\r\n                        Status: 'network',\r\n                        Result: {\r\n                            Message: 'network error'\r\n                        }\r\n                    });\r\n                }\r\n            );\r\n        });        \r\n    }\r\n    /** Принудительное разлогинивание пользователя.\r\n     * В том числе и на серверах ресурсов\r\n     * @return {Function} promise(status)\r\n     */\r\n    logout () {\r\n        return new Promise ((resolve, reject) => {\r\n            let promises = [];\r\n            for (let i = 0; i < this._resourceServers.length; i++) {\r\n                let resourceServer = this._resourceServers[i];\r\n                let promise = resourceServer.sendGetRequest('oAuth2/Logout.ashx');\r\n                promises.push(promise);\r\n            }\r\n            this._chain(promises, {})\r\n            .then(() => {\r\n                if (this._clientId === 1) {\r\n                    sendCrossDomainJSONRequest('http://my.kosmosnimki.ru/Handler/Logout',\r\n                    (response) => resolve({ Status: 'ok'}), '', () => reject({ Status: 'network'}));\r\n                } else {\r\n                    resolve({\r\n                        Status: 'ok'\r\n                    });                    \r\n                    let event = document.createEvent('Event');\r\n                    event.initEvent('logout', false, false);\r\n                    this.dispatchEvent(event);\r\n                }\r\n            })\r\n            .catch(() => {\r\n                reject({\r\n                    Status: 'error'\r\n                });\r\n            });            \r\n        });           \r\n    }\r\n}\r\n\r\nexport { AuthManager };\r\n\n\n\n// WEBPACK FOOTER //\n// ./../src/lib/Authentication/src/AuthManager/AuthManager.js","import { Server } from './Server.js';\r\n\r\nclass ResourceServer extends Server {\r\n    constructor(authManager, {id, root}){\r\n        super({root: root});\r\n        this._id = id;        \r\n        this._authManager = authManager;\r\n        this._authManager.$addResourceServer(this);\r\n        // this.sendGetRequest = this.extendRequestMethod('sendGetRequest');\r\n        // this.sendImageRequest = this.extendRequestMethod('sendImageRequest');\r\n        // this.sendPostRequest = this.extendRequestMethod('sendPostRequest');\r\n    }\r\n    // extendRequestMethod (requestFuncName) {\r\n    //     return function(url, params, baseForm) {\r\n    //         let params = params || {};\r\n    //         params.sync = this._authManager.$getAntiCsrfToken();\r\n    //         return new Promise((resolve, reject) => {\r\n    //             super[requestFuncName].call(this, url, params, baseForm)\r\n    //             .then(data => {\r\n    //                 data.Service = { ServerId: self._id };                    \r\n    //                 if (data.Status === 'ok') {\r\n    //                     resolve(data);\r\n    //                 } else {\r\n    //                     reject(data);\r\n    //                 }\r\n    //             })\r\n    //             .catch(errors => {\r\n    //                 reject({\r\n    //                     Status: 'error',\r\n    //                     ErrorInfo: errors.ErrorInfo\r\n    //                 });\r\n    //             });\r\n    //         });                    \r\n    //     }\r\n    // }\r\n    sendGetRequest (url, params, baseForm) {\r\n        params = params || {};\r\n        params.sync = this._authManager.$getAntiCsrfToken();\r\n        return new Promise ((resolve, reject) => {\r\n            super.sendGetRequest(url, params, baseForm)\r\n            .then(data => {\r\n                data.Service = { ServerId: this._id };            \r\n                if (data.Status === 'ok') {\r\n                    resolve(data);\r\n                } else {\r\n                    reject(data);\r\n                }\r\n            })\r\n            .catch(errors => reject({ Status: 'error', ErrorInfo: errors.ErrorInfo }));\r\n        });  \r\n    }\r\n    sendImageRequest (url, params, baseForm) {\r\n        params = params || {};\r\n        params.sync = this._authManager.$getAntiCsrfToken();\r\n        return new Promise ((resolve, reject) => {\r\n            super.sendImageRequest(url, params, baseForm)\r\n            .then(data => {\r\n                data.Service = { ServerId: this._id };            \r\n                if (data.Status === 'ok') {\r\n                    resolve(data);\r\n                } else {\r\n                    reject(data);\r\n                }\r\n            })\r\n            .catch(errors => reject({ Status: 'error', ErrorInfo: errors.ErrorInfo }));\r\n        });  \r\n    }\r\n    sendPostRequest (url, params, baseForm) {\r\n        params = params || {};\r\n        params.sync = this._authManager.$getAntiCsrfToken();\r\n        return new Promise ((resolve, reject) => {\r\n            super.sendPostRequest(url, params, baseForm)\r\n            .then(data => {\r\n                data.Service = { ServerId: this._id };            \r\n                if (data.Status === 'ok') {\r\n                    resolve(data);\r\n                } else {\r\n                    reject(data);\r\n                }\r\n            })\r\n            .catch(errors => reject({ Status: 'error', ErrorInfo: errors.ErrorInfo }));\r\n        });  \r\n    }\r\n}\r\n\r\nexport { ResourceServer };\n\n\n// WEBPACK FOOTER //\n// ./../src/lib/Authentication/src/AuthManager/ResourceServer.js","import { sendCrossDomainJSONRequest } from '../lib/Request/src/Request.js';\r\n\r\n//TODO: использовать ли библиотеку?\r\nfunction parseUri(str)\r\n{\r\n    var parser = /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/,\r\n        key = [\"source\",\"protocol\",\"authority\",\"userInfo\",\"user\",\"password\",\"host\",\"port\",\"relative\",\"path\",\"directory\",\"file\",\"query\",\"anchor\"],\r\n        m = parser.exec(str),\r\n        uri = {},\r\n        i   = 14;\r\n\r\n    while (i--) uri[key[i]] = m[i] || \"\";\r\n    \r\n    // HACK\r\n    uri.hostOnly = uri.host;\r\n    uri.host = uri.authority;\r\n    \r\n    return uri;\r\n}\r\n\r\nlet requests = {};\r\nlet lastRequestId = 0;\r\nlet uniquePrefix = `id${Math.random()}`;\r\n\r\nfunction processMessage (e) {\r\n    if (e.origin in requests) {\r\n        let dataStr = decodeURIComponent(e.data.replace(/\\n/g,'\\n\\\\'));\r\n        try {\r\n            let dataObj = JSON.parse(dataStr);\r\n            var request = requests[e.origin][dataObj.CallbackName];\r\n            if (request) {\r\n                delete requests[e.origin][dataObj.CallbackName];\r\n                request.iframe.parentNode.removeChild(request.iframe);\r\n                request.callback && request.callback(dataObj);\r\n            }\r\n        }\r\n        catch (e) { }\r\n    }    \r\n}\r\n\r\n//совместимость с IE8\r\nif (window.addEventListener) {\r\n    window.addEventListener('message', processMessage);\r\n} else {\r\n    window.attachEvent('onmessage', processMessage);\r\n}\r\n\r\nfunction addQueryVariables (url, variables) {\r\n    let oldQueryString = url.split('?')[1];\r\n    let newQueryString = '';\r\n    for (let variable in variables) {\r\n        if (variables.hasOwnProperty(variable)) {\r\n            newQueryString += ('&' + variable + '=' + encodeURIComponent(variables[variable]));\r\n        }\r\n    }\r\n    if (oldQueryString) {\r\n        return url + newQueryString;\r\n    } else {\r\n        return url + '?' + newQueryString.slice(1);\r\n    }\r\n}\r\n\r\nfunction createPostIframe(id)\r\n{\r\n    var iframe = document.createElement(\"iframe\");\r\n    iframe.style.display = 'none';\r\n    iframe.setAttribute('id', id);\r\n    iframe.setAttribute('name', id);\r\n    iframe.src = 'javascript:true';\r\n    \r\n    return iframe;\r\n}\r\n\r\nclass Server {\r\n    constructor({root}) {\r\n        this._root = root;\r\n    }\r\n\r\n    /** Послать GET запрос к серверу ресурсов.\r\n     * @param  {String} url\r\n     * @param  {Object} params\r\n     * @return {Function} promise(data)\r\n     */\r\n    sendGetRequest (url, params) {\r\n        return new Promise((resolve, reject) => {\r\n            let requestUrl = `${this._root}/${url}`;\r\n            requestUrl = addQueryVariables(requestUrl, params);\r\n            sendCrossDomainJSONRequest(requestUrl, data => resolve(data), 'CallbackName', errors => reject({ Status: 'error' }));           \r\n        });        \r\n    }\r\n        \r\n    /** Послать к серверу ресурсов запрос за картинкой.\r\n     * @param  {String} url\r\n     * @param  {Object} params\r\n     * @return {Function} promise(image)\r\n     */\r\n    sendImageRequest (url, params) {            \r\n        let requestUrl = `${this._root}/${url}`;\r\n        requestUrl = addQueryVariables(requestUrl, params);\r\n        \r\n        var img = new Image();\r\n        \r\n        img.onload = () => resolve({ Status: 'ok', Result: img });\r\n        img.onerror = errors => reject(errors);            \r\n        img.src = requestUrl;\r\n    }\r\n\r\n    /** Послать POST запрос к серверу ресурсов.\r\n     * @param  {String} url\r\n     * @param  {Object} params\r\n     * @param  {HTMLFormElement} baseForm HTML Form, которая может быть использована как основа для посылки запроса (например, если нужно загрузить файл)\r\n     * @return {Function} promise(data)\r\n     */\r\n    sendPostRequest (url, params, baseForm) {\r\n        let requestURL = `${this._root}/${url}`;            \r\n        return new Promise((resolve, reject) => {\r\n            let processResponse = (response) => {\r\n                if (response.Status !== 'ok') {\r\n                    reject(response);\r\n                } else {\r\n                    resolve(response);\r\n                }\r\n            };\r\n\r\n            try {\r\n                \r\n                let id = `${uniquePrefix}${lastRequestId++}`;\r\n                let iframe = createPostIframe(id);\r\n                let parsedURL = parseUri(requestURL);\r\n                let origin = (parsedURL.protocol ? `${parsedURL.protocol}:` : window.location.protocol) + `//${parsedURL.host || window.location.host}`;\r\n                let originalFormAction;\r\n                let form;\r\n                \r\n                requests[origin] = requests[origin] || {};\r\n                requests[origin][id] = {callback: processResponse, iframe: iframe};\r\n                    \r\n                if (baseForm)\r\n                {\r\n                    form = baseForm;\r\n                    originalFormAction = form.getAttribute('action');\r\n                    form.setAttribute('action', requestURL);\r\n                    form.target = id;                \r\n                }\r\n                else\r\n                {\r\n                    form = document.createElement('form');\r\n                    form.style.display = 'none';\r\n                    form.setAttribute('enctype', 'multipart/form-data');\r\n                    form.target = id;\r\n                    form.setAttribute('method', 'POST');\r\n                    form.setAttribute('action', requestURL);\r\n                    form.id = id;\r\n                }\r\n                \r\n                let hiddenParamsDiv = document.createElement(\"div\");\r\n                hiddenParamsDiv.style.display = 'none';\r\n                \r\n                let appendFormParam = function(paramName, paramValue) { \r\n                    let input = document.createElement(\"input\");            \r\n                    paramValue = typeof paramValue !== 'undefined' ? paramValue : '';\r\n                    \r\n                    input.setAttribute('type', 'hidden');\r\n                    input.setAttribute('name', paramName);\r\n                    input.setAttribute('value', paramValue);\r\n                    \r\n                    hiddenParamsDiv.appendChild(input)\r\n                }\r\n                \r\n                for (let paramName in params) {\r\n                    appendFormParam(paramName, params[paramName]);\r\n                }\r\n                \r\n                appendFormParam('WrapStyle', 'message');\r\n                appendFormParam('CallbackName', id);\r\n                \r\n                form.appendChild(hiddenParamsDiv);\r\n                \r\n                if (!baseForm)\r\n                    document.body.appendChild(form);\r\n                    \r\n                document.body.appendChild(iframe);\r\n                \r\n                form.submit();\r\n                \r\n                if (baseForm)\r\n                {\r\n                    form.removeChild(hiddenParamsDiv);\r\n                    if (originalFormAction !== null)\r\n                        form.setAttribute('action', originalFormAction);\r\n                    else\r\n                        form.removeAttribute('action');\r\n                }\r\n                else\r\n                {\r\n                    form.parentNode.removeChild(form);\r\n                }\r\n            }\r\n            catch (e) {\r\n                reject(e);\r\n            }\r\n            \r\n        });                                    \r\n    }\r\n}\r\n\r\nexport { Server };\n\n\n// WEBPACK FOOTER //\n// ./../src/lib/Authentication/src/AuthManager/Server.js","class EventTarget {\r\n    constructor(){\r\n        this.listeners = {};\r\n    }\r\n    addEventListener(type, callback) {\r\n        if(!(type in this.listeners)) {\r\n            this.listeners[type] = [];\r\n        }\r\n        this.listeners[type].push(callback);\r\n    }\r\n    removeEventListener (type, callback) {\r\n        if(!(type in this.listeners)) {\r\n            return;\r\n        }\r\n        var stack = this.listeners[type];\r\n        for(var i = 0, l = stack.length; i < l; i++) {\r\n            if(stack[i] === callback){\r\n                stack.splice(i, 1);\r\n                return this.removeEventListener(type, callback);\r\n            }\r\n        }\r\n    }\r\n    dispatchEvent(event) {\r\n        if(!(event.type in this.listeners)) {\r\n            return;\r\n        }\r\n        var stack = this.listeners[event.type];\r\n        // event.target = this;\r\n        for(var i = 0, l = stack.length; i < l; i++) {\r\n            stack[i].call(this, event);\r\n        }\r\n    }\r\n}\r\n\r\nexport { EventTarget };\n\n\n// WEBPACK FOOTER //\n// ./../src/lib/Authentication/src/lib/EventTarget/src/EventTarget.js","import { sendCrossDomainJSONRequest } from '../src/lib/Request/src/Request.js';\r\nimport { getAuthManager, getResourceServer } from '../src/lib/Authentication/src/AuthManager/api.js';\r\nimport { chain, hex, from_gmx } from '../src/app/Utils/Utils.js';\r\n\r\nlet ss = ['WV03','WV02',\r\n'GE01','PHR','QB02',\r\n'KOMPSAT3A','KOMPSAT3',\r\n'IK','GF2',\r\n'KOMPSAT2',\r\n'SP6_7','BKA','GF1_2m','ZY3','RE',\r\n'LANDSAT_8',\r\n'GF1_16m',\r\n'WV01',\r\n'EROSB','EROSA',\r\n'GE01_L','IK_L','QB02_L','WV01_L','WV02_L',\r\n'SP5_2MS','SP5_5MS','SP5_10MS',\r\n'SP5_2PC','SP5_5PC'];\r\n\r\nlet gmxResourceServer = getResourceServer('geomixer');\r\n\r\nfunction read_permalink (state) {\r\n    return new Promise((resolve, reject) => {\r\n        gmxResourceServer.sendGetRequest('TinyReference/Get.ashx', { id: state.id })\r\n        .then(response => {\r\n            if (response.Status == 'ok') {\r\n                try {\r\n                    resolve(JSON.parse(response.Result));\r\n                }\r\n                catch (e) {\r\n                    reject(e);\r\n                }\t\t\t\t        \r\n            }\r\n            else {\r\n                reject(response.Result);\r\n            }\r\n        })\r\n        .catch(e => reject(e));\r\n    });\r\n}\r\n\r\nfunction get_query (ids) {\r\n    return ids.map(id => `(sceneid = '${id}')`).join (' OR ');\r\n}\r\n\r\nfunction search (ids) {\r\n    return new Promise((resolve, reject) => {        \r\n        if (ids.length > 0) {\r\n            gmxResourceServer.sendPostRequest('VectorLayer/Search.ashx', {\r\n                layer: 'AFB4D363768E4C5FAC71C9B0C6F7B2F4',\r\n                geometry: true,\r\n                pagesize: 0,\r\n                query: get_query(ids),\r\n                WrapStyle: 'message',\r\n            })\r\n            .then(response => {\r\n                if (response.Status == 'ok') {\r\n                    try {                        \r\n                        resolve(from_gmx(response.Result));\r\n                    }\r\n                    catch (e) {\r\n                        reject(e);\r\n                    }\t\t\t\t        \r\n                }\r\n                else {\r\n                    reject(response.Result);\r\n                }\r\n            })\r\n            .catch(e => reject(e));\r\n        }\r\n        else {            \r\n            resolve([]);\r\n        }\r\n    });\r\n}\r\n\r\nfunction get_items (state) {\r\n    return new Promise (resolve => {\r\n        search (state.selected.concat(state.quicklook))\r\n        .then (items => {\r\n            state.items = items;\r\n            state.items.forEach (item => {\r\n                item.quicklook = false;\r\n                if (Array.isArray(state.quicklook)) {\r\n                    for (let i = 0; i < state.quicklook.length; ++i) {\r\n                        if (state.visible[i] === item.sceneid) {\r\n                            item.quicklook = true;\r\n                            break;\r\n                        }           \r\n                    }\r\n                }\r\n\r\n                item.checked = false;\r\n                if (Array.isArray(state.cart)) {\r\n                    for (let i = 0; i < state.cart.length; ++i) {\r\n                        if (state.cart[i] === item.sceneid) {\r\n                            item.checked = true;\r\n                            break;\r\n                        }           \r\n                    }\r\n                }\r\n                                                 \r\n            });\r\n            resolve(state);\r\n        })\r\n        .catch (e => {\r\n            console.log(e);\r\n            resolve(state);\r\n        });\r\n    });\r\n}\r\n\r\nfunction get_cart (state) {\r\n    return new Promise (resolve => {\r\n        search (state.cart)\r\n        .then (items => {\r\n            state.cart = items;\r\n            resolve(state);\r\n        })\r\n        .catch (e => {\r\n            console.log(e);\r\n            resolve(state);\r\n        });\r\n    });\r\n}\r\n\r\nlet matches = /\\?([^&]+)/g.exec(window.location.search);\r\nif (matches.length > 1) {\r\n    let id = matches[1];\r\n    chain([\r\n        read_permalink,\r\n        get_items,\r\n        get_cart,\r\n    ], {id})\r\n    .then(state => {\r\n        let {\r\n            lang, \r\n            position,\r\n            bounds,\r\n            cadastre,\r\n            activeLayer,\r\n            drawingObjects,\r\n            searchCriteria: { \r\n                dateStart, dateEnd, \r\n                isYearly, \r\n                minCloudCover, maxCloudCover, \r\n                minAngle, maxAngle,\r\n                archive,\r\n                stereo,\r\n                satellites,\r\n            },\r\n            cart,\r\n            items,\r\n        } = state;\r\n        let rxDate = new RegExp ('(\\\\d{2})\\\\.(\\\\d{2})\\\\.(\\\\d{4})');\r\n        let d1 = rxDate.exec(dateStart);\r\n        let d2 = rxDate.exec(dateEnd);\r\n        let date = [`${d1[3]}-${d1[2]}-${d1[1]}`,`${d2[3]}-${d2[2]}-${d2[1]}`];\r\n        let st = satellites.reduce((a,i) => {\r\n            let s = ss[i];\r\n            let k = s.lastIndexOf('_L');\r\n            if (k > -1){                                        \r\n                let x = s.substr(0, k);\r\n                if (x === 'WV01') {\r\n                    a.pc.push (x);\r\n                }\r\n                else {\r\n                    a.ms.push (x);\r\n                }\r\n            }\r\n            else if (s in ['WV01', 'EROSA', 'EROSB']) {\r\n                a.pc.push (s);\r\n            }\r\n            else {\r\n                a.ms.push (s);\r\n            }\r\n            return a;\r\n        }, {ms: [], pc: []});\r\n        let objects = drawingObjects.map (item => {\r\n            let {name, color, checked} = item.properties;\r\n            return {\r\n                name: name,\r\n                geoJSON: item,\r\n                color: typeof color === 'string' && color !== '' ? `#${hex(color, 6)}` : '#0033FF',\r\n                visible: checked,\r\n            };\r\n        });        \r\n        let viewState = {\r\n            lang,\r\n            activeLayer,\r\n            drawingObjects: objects,\r\n            position,                \r\n            bounds,                \r\n            searchCriteria: {\r\n                date,\r\n                annually: isYearly,\r\n                angle: [minAngle, maxAngle],\r\n                clouds: [minCloudCover, maxCloudCover],\r\n                stereo,\r\n                archive,\r\n                satellites: st,\r\n            },\r\n            items,\r\n            cart,\r\n            cadastre,\r\n        };\r\n        localStorage.setItem('view_state', JSON.stringify(viewState));\r\n        window.location = `${window.location.origin}${window.location.pathname.substr(0, window.location.pathname.lastIndexOf('/'))}`;\r\n    });\r\n}\n\n\n// WEBPACK FOOTER //\n// ./init.js"],"sourceRoot":""}